<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Search Service</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-left">
            <div class="logo">📸 Photo Search</div>
        </div>
        <div id="loginBtnContainer" class="nav-right">
            <button class="login-btn" onclick="openLoginModal()">로그인</button>
        </div>
        <div id="logoutBtnContainer" class="nav-right" style="display: none;">
            <div class="username" id="username">이스터에그</div>
            <button class="login-btn" onclick="logout()">로그아웃</button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Toggle Switch -->
        <div class="toggle-container">
            <div class="toggle-switch">
                <button class="toggle-btn active" onclick="switchTab('upload')">사진 저장</button>
                <button class="toggle-btn" onclick="switchTab('search')">사진 검색</button>
            </div>
        </div>

        <!-- Upload Section -->
        <div id="upload-section" class="content-section active">
            <h2 class="section-title">사진 업로드</h2>
            <div class="upload-area" onclick="document.getElementById('fileInput').click()" ondrop="handleDrop(event)"
                ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                <div class="upload-icon">📁</div>
                <div class="upload-text">파일을 드래그하거나 클릭하여 업로드</div>
                <div class="upload-subtext">JPG, PNG, GIF 파일을 지원합니다</div>
                <input type="file" id="fileInput" class="file-input" multiple accept="image/*"
                    onchange="handleFileSelect(event)">
                <button class="upload-btn">파일 선택</button>
            </div>
        </div>

        <!-- Search Section -->
        <div id="search-section" class="content-section">
            <h2 class="section-title">사진 검색</h2>

            <!-- Search Input -->
            <div style="display: flex;">
                <textarea class="search-input" placeholder="검색할 내용을 입력하세요... (예: 바다에서 노는 강아지)"
                    id="searchInput"></textarea>
                <button class="search-btn" onclick="performSearch()">검색</button>
            </div>

            <div class="upload-area" onclick="document.getElementById('searchFileInput').click()"
                ondrop="handleSearchDrop(event)" ondragover="handleDragOver(event)"
                ondragleave="handleDragLeave(event)">
                <div class="upload-icon">📁</div>
                <div class="upload-text">또는 사진을 드래그하거나 클릭하여 검색</div>
                <div class="upload-subtext">JPG, PNG, GIF 파일을 지원합니다</div>
                <input type="file" id="searchFileInput" class="file-input" accept="image/*"
                    onchange="handleSearchFileSelect(event)">
                <button class="upload-btn">파일 선택</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="photoCount">-</div>
                    <div class="stat-label">저장된 사진</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSize">-</div>
                    <div class="stat-label">전체 크기</div>
                </div>
            </div>

            <div id="searchMessage" class="search-message"></div>

            <!-- Search Results -->
            <div id="searchResults">
                <!-- Default Photos Grid -->
                <div class="photo-grid" id="defaultPhotos">
                    <div class="photo-card">
                        <div class="photo-img">🏔️</div>
                        <div class="photo-info">
                            <div class="photo-title">산악 풍경</div>
                            <div class="photo-meta">크기: 2.1MB</div>
                            <div class="photo-meta">업로드: 2024-01-15</div>
                        </div>
                    </div>
                    <div class="photo-card">
                        <div class="photo-img">🌊</div>
                        <div class="photo-info">
                            <div class="photo-title">바다 풍경</div>
                            <div class="photo-meta">크기: 1.8MB</div>
                            <div class="photo-meta">업로드: 2024-01-14</div>
                        </div>
                    </div>
                    <div class="photo-card">
                        <div class="photo-img">🌸</div>
                        <div class="photo-info">
                            <div class="photo-title">벚꽃 축제</div>
                            <div class="photo-meta">크기: 3.2MB</div>
                            <div class="photo-meta">업로드: 2024-01-13</div>
                        </div>
                    </div>
                    <div class="photo-card">
                        <div class="photo-img">🐕</div>
                        <div class="photo-info">
                            <div class="photo-title">강아지 산책</div>
                            <div class="photo-meta">크기: 1.5MB</div>
                            <div class="photo-meta">업로드: 2024-01-12</div>
                        </div>
                    </div>
                    <div class="photo-card">
                        <div class="photo-img">🌆</div>
                        <div class="photo-info">
                            <div class="photo-title">도시 야경</div>
                            <div class="photo-meta">크기: 2.7MB</div>
                            <div class="photo-meta">업로드: 2024-01-11</div>
                        </div>
                    </div>
                    <div class="photo-card">
                        <div class="photo-img">🍕</div>
                        <div class="photo-info">
                            <div class="photo-title">맛있는 피자</div>
                            <div class="photo-meta">크기: 1.9MB</div>
                            <div class="photo-meta">업로드: 2024-01-10</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">로그인</h3>
            <form>
                <div class="form-group">
                    <label class="form-label">이메일</label>
                    <input name="email" type="email" class="form-input" placeholder="이메일을 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">비밀번호</label>
                    <input name="password" type="password" class="form-input" placeholder="비밀번호를 입력하세요">
                </div>
                <div class="login-message" id="loginMessage" hidden></div>
                <div class="modal-buttons">
                    <button type="button" class="modal-btn secondary" onclick="closeLoginModal()">취소</button>
                    <button type="button" class="modal-btn secondary" onclick="openSignUpModal()">회원가입</button>
                    <button id="loginBtn" type="button" class="modal-btn primary" onclick="handleLogin()">로그인</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sign-up Modal -->
    <div id="signUpModal" class="modal">
        <div class="modal-content">
            <h3 class="modal-title">회원가입</h3>
            <form>
                <div class="form-group">
                    <label class="form-label">이메일</label>
                    <input name="email" type="email" class="form-input" placeholder="이메일을 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">닉네임</label>
                    <input name="username" type="text" class="form-input" placeholder="닉네임을 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">비밀번호</label>
                    <input name="password" id="pwdInput" type="password" class="form-input" placeholder="비밀번호를 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">비밀번호 확인</label>
                    <input id="pwdConfirmInput" type="password" class="form-input" placeholder="입력한 비밀번호를 다시 입력하세요">
                </div>
                <div class="form-group">
                    <label class="form-label">인증번호</label>
                    <button id="sendCodeBtn" type="button" class="modal-btn" onclick="sendEmailVerification()">인증번호
                        요청</button>
                    <input hidden name="verificationCode" id="codeInput" type="text" class="form-input"
                        placeholder="인증번호를 입력하세요">
                </div>
                <div class="modal-buttons">
                    <button type="button" class="modal-btn secondary" onclick="closeSignUpModal()">취소</button>
                    <button type="button" class="modal-btn secondary" onclick="openLoginModal()">로그인</button>
                    <button id="signUpBtn" type="button" class="modal-btn primary"
                        onclick="handleSignUp()">회원가입</button>
                </div>
            </form>
        </div>
    </div>

    <div id="taskBox"></div>
    <div class="tooltiptext"></div>
    <div id="customContextMenu" class="context-menu" role="menu" aria-hidden="true">
        <div class="context-menu-item" data-action="save">
            <span>💾</span>
            이미지 저장
        </div>
        <div class="context-menu-item" data-action="delete" style="color: red;">
            <span>🗑️</span>
            이미지 삭제 (영구)
        </div>
    </div>

    <div id="viewModal" class="modal">
        <div class="view-modal-content">
            <span class="view-modal-close" onclick="closeViewModal()">&times;</span>
            <div class="view-modal-body">
                <div class="view-modal-image-container">
                    <img id="viewModalImg" src="" alt="Full view">
                </div>
                <div class="view-modal-info-container">
                    <div id="viewModalInfo"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="api.js"></script>


</body>

</html>